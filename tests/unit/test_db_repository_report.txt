============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0 -- /Users/sbu/.pyenv/versions/3.12.12/bin/python
cachedir: .pytest_cache
rootdir: /Users/sbu/Desktop/side project/合約交易
plugins: anyio-4.12.1, mock-3.15.1, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 23 items

tests/unit/test_db_repository.py::test_insert_and_get_experiment PASSED  [  4%]
tests/unit/test_db_repository.py::test_get_nonexistent_experiment PASSED [  8%]
tests/unit/test_db_repository.py::test_insert_multiple_experiments PASSED [ 13%]
tests/unit/test_db_repository.py::test_update_strategy_stats PASSED      [ 17%]
tests/unit/test_db_repository.py::test_upsert_strategy_stats PASSED      [ 21%]
tests/unit/test_db_repository.py::test_get_all_strategy_stats PASSED     [ 26%]
tests/unit/test_db_repository.py::test_query_by_strategy_name PASSED     [ 30%]
tests/unit/test_db_repository.py::test_query_by_symbol PASSED            [ 34%]
tests/unit/test_db_repository.py::test_query_by_min_sharpe PASSED        [ 39%]
tests/unit/test_db_repository.py::test_query_by_grade PASSED             [ 43%]
tests/unit/test_db_repository.py::test_query_by_tags PASSED              [ 47%]
tests/unit/test_db_repository.py::test_query_by_date_range PASSED        [ 52%]
tests/unit/test_db_repository.py::test_query_pagination PASSED           [ 56%]
tests/unit/test_db_repository.py::test_query_combined_filters PASSED     [ 60%]
tests/unit/test_db_repository.py::test_get_best_by_sharpe PASSED         [ 65%]
tests/unit/test_db_repository.py::test_get_best_by_total_return PASSED   [ 69%]
tests/unit/test_db_repository.py::test_get_best_with_filters PASSED      [ 73%]
tests/unit/test_db_repository.py::test_get_best_handles_null_values PASSED [ 78%]
tests/unit/test_db_repository.py::test_sql_injection_invalid_metric PASSED [ 82%]
tests/unit/test_db_repository.py::test_sql_injection_valid_metric_only PASSED [ 86%]
tests/unit/test_db_repository.py::test_safe_json_loads_invalid_json PASSED [ 91%]
tests/unit/test_db_repository.py::test_safe_json_loads_null_values PASSED [ 95%]
tests/unit/test_db_repository.py::test_safe_json_loads_empty_string PASSED [100%]

============================== 23 passed in 0.41s ==============================
