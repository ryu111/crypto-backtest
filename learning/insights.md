# 交易策略洞察彙整

> 最後更新：2026-01-11
> 總實驗數：1

---

## 🎓 核心知識

### 永續合約特殊性
| 特性 | 說明 | 回測影響 |
|------|------|----------|
| 資金費率 | 每 8 小時結算，多空成本不同 | 必須納入 P&L 計算 |
| 基差 | 永續 vs 現貨價差 | 可設計套利策略 |
| 強平機制 | 槓桿越高，維持保證金越高 | 需模擬強平風險 |
| 滑點 | 市價單衝擊成本 | 大單需考慮流動性 |

### 過擬合防護（5 階段驗證）
```
Stage 1: 基礎回測 → 邏輯正確？
    ↓
Stage 2: 統計檢定 → Sharpe 顯著 > 0？（p < 0.05）
    ↓
Stage 3: 穩健性測試 → 參數 ±10% 還能賺？
    ↓
Stage 4: Walk-Forward → 滾動訓練/測試通過？
    ↓
Stage 5: Monte Carlo → 1000 次模擬過擬合率 < 30%？
```

### 關鍵評估指標
| 指標 | 健康值 | 警戒值 | 說明 |
|------|--------|--------|------|
| Sharpe Ratio | > 1.5 | < 1.0 | 風險調整報酬 |
| MaxDD | < 20% | > 30% | 最大回撤 |
| 勝率 | > 50% | - | 需配合盈虧比 |
| 過擬合率 | < 20% | > 30% | Monte Carlo 失敗率 |
| 交易次數 | > 100 | < 30 | 統計顯著性 |

### AI 策略選擇
- **80% Exploit**：選擇歷史表現最好的策略
- **20% Explore**：嘗試新策略或參數組合
- **原因**：純 exploit 陷入局部最優，純 explore 浪費資源

---

## 策略類型洞察

### 趨勢跟隨策略

#### ma_cross_4h_v1
- **最佳參數**：fast_period=10, slow_period=30
- **績效**：Sharpe 1.85, Return 45.6%
- **洞察**：ATR 2x 止損表現更好

### 動量策略
*尚無記錄*

### 均值回歸策略
*尚無記錄*

---

## 標的特性

### BTCUSDT
- trend 策略表現良好（Sharpe: 1.85）
- ATR 2x 止損表現更好
- 高波動期適合趨勢策略

### ETHUSDT
*尚無記錄*

---

## 風險管理洞察

### 部位大小
- Kelly Criterion 理論最優但實務上太激進
- 建議使用 Half-Kelly 或 Quarter-Kelly

### 止損策略
- ATR-based 止損比固定百分比更適應波動
- 2x ATR 是常見起點，需依策略調整

### 槓桿使用
- 永續合約最大槓桿雖高達 100x，但建議 < 10x
- 高槓桿 + 高波動 = 快速強平

---

## 過擬合教訓

### 教訓 1：參數過度優化
- **現象**：回測 Sharpe 3.0+，實盤虧損
- **原因**：過度擬合歷史資料
- **解法**：Walk-Forward + Monte Carlo 驗證

### 教訓 2：樣本不足
- **現象**：100 筆交易就宣稱策略有效
- **原因**：統計不顯著
- **解法**：至少 100+ 筆交易，t-test p < 0.05

### 教訓 3：忽略交易成本
- **現象**：回測賺錢，實盤虧手續費
- **原因**：未計入滑點和手續費
- **解法**：回測時加入真實交易成本

---

## 🔧 待優化項目

### 資料品質
- [ ] 處理交易所維護期間的資料缺失
- [ ] 加入滑點模擬（市價單 vs 限價單）
- [ ] 考慮流動性影響（大單衝擊成本）

### 策略驗證
- [ ] 加入更多統計檢定（Bootstrap, Permutation Test）
- [ ] 實作 Combinatorial Purged Cross-Validation
- [ ] 加入 Deflated Sharpe Ratio（多重檢定校正）

### 風險管理
- [ ] 動態部位調整（Kelly Criterion）
- [ ] 相關性風險（多策略同時虧損）
- [ ] 黑天鵝事件壓力測試

### AI 自動化
- [ ] 多目標優化（Sharpe + MaxDD 同時優化）
- [ ] 策略組合優化（Portfolio of Strategies）
- [ ] 自動特徵工程（指標組合生成）

### 效能優化
- [ ] 向量化計算優化
- [ ] GPU 加速（CuPy/RAPIDS）
- [ ] 分散式回測（多幣種並行）
