# æœˆåº¦å ±é…¬ç†±åŠ›åœ– - UI è¨­è¨ˆè¦æ ¼

## ğŸ“‹ éœ€æ±‚ç†è§£

### ç›®æ¨™
é¡¯ç¤ºç­–ç•¥åœ¨æ¯å€‹æœˆä»½çš„å ±é…¬è¡¨ç¾ï¼Œå¿«é€Ÿè­˜åˆ¥è¡¨ç¾å¥½/å·®çš„æœˆä»½ä»¥åŠå­£ç¯€æ€§è¦å¾‹ã€‚

### ä½¿ç”¨è€…
- é‡åŒ–äº¤æ˜“è€…ï¼šåˆ†æç­–ç•¥æœˆåº¦ç©©å®šæ€§
- ç­–ç•¥ç ”ç©¶å“¡ï¼šè­˜åˆ¥å­£ç¯€æ€§æ¨¡å¼ï¼ˆå¦‚ç‰¹å®šæœˆä»½è¡¨ç¾è¼ƒå¥½ï¼‰
- é¢¨éšªç®¡ç†è€…ï¼šæª¢æŸ¥å ±é…¬åˆ†ä½ˆå’Œæ¥µç«¯æœˆä»½

### é—œéµäº’å‹•
1. **å¿«é€Ÿæƒè¦–**ï¼šç´…ç¶ é…è‰²ç›´è¦ºè­˜åˆ¥ç›ˆè™§æœˆä»½
2. **ç²¾ç¢ºæŸ¥è©¢**ï¼šæ‡¸åœé¡¯ç¤ºå…·é«”å ±é…¬æ•¸å­—
3. **å¤šå¹´æ¯”è¼ƒ**ï¼šåˆ‡æ›å¹´ä»½æŸ¥çœ‹æ­·å²è¡¨ç¾
4. **æ™‚é–“è¯å‹•**ï¼šèˆ‡æ¬Šç›Šæ›²ç·šåœ–è¡¨æ™‚é–“ç¯„åœåŒæ­¥

### æ ¸å¿ƒæŒ‘æˆ°
1. **è‰²å½©æ˜ å°„**ï¼šç´…ç¶ æ¼¸å±¤éœ€è€ƒæ…®è‰²ç›²å‹å¥½æ€§å’Œå°æ¯”åº¦
2. **æ•¸æ“šç¯„åœ**ï¼šå¤šå¹´è³‡æ–™éœ€è¦å¹´ä»½åˆ‡æ›æ©Ÿåˆ¶
3. **è¦–è¦ºä¸€è‡´æ€§**ï¼šèˆ‡æ¬Šç›Šæ›²ç·šåœ–è¡¨é¢¨æ ¼çµ±ä¸€
4. **ç©ºç¼ºè™•ç†**ï¼šå›æ¸¬æœŸé–“ä¸è¶³ä¸€æ•´æœˆçš„æ ¼å­å¦‚ä½•é¡¯ç¤º

---

## ğŸ“ LAYOUT

### å…ƒä»¶çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœˆåº¦å ±é…¬ç†±åŠ›åœ–                                           â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ é¡¯ç¤ºå¹´ä»½: 2024 â–¼    â”‚  â”‚ æ™‚é–“ç¯„åœ: [èˆ‡ä¸»åœ–åŒæ­¥]   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚     Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct... â”‚
â”‚                                                         â”‚
â”‚ 2024 [+5.2%][+3.1%][-1.2%][+4.5%]...                   â”‚
â”‚ 2023 [+2.3%][+1.8%][+6.2%][-0.5%]...                   â”‚
â”‚ 2022 ...                                               â”‚
â”‚                                                         â”‚
â”‚ ğŸŸ¢ æ­£å ±é…¬  âšª æ¥è¿‘é›¶  ğŸ”´ è² å ±é…¬                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½ˆå±€æ¨¡å¼

**Grid ä½ˆå±€ï¼ˆæœˆä»½æ ¼å­ï¼‰**
```css
.heatmap-grid {
  display: grid;
  grid-template-columns: 60px repeat(12, 1fr); /* å¹´ä»½æ¨™ç±¤ + 12 æœˆ */
  gap: var(--spacing-xs); /* 4px - æ ¼å­é–“è· */
  max-width: 100%;
}
```

### é–“è·ç³»çµ±

| å€åŸŸ | Token | å€¼ | åŸå›  |
|------|-------|-----|------|
| æ ¼å­é–“è· | `var(--spacing-xs)` | 4px | ç·Šæ¹Šæ’åˆ—ï¼Œæœ€å¤§åŒ–é¡¯ç¤ºå¯†åº¦ |
| æ¨™é¡Œé–“è· | `var(--spacing-md)` | 16px | èˆ‡å…¶ä»–å…ƒä»¶æ¨™é¡Œä¸€è‡´ |
| åœ–ä¾‹é–“è· | `var(--spacing-sm)` | 8px | åœ–ä¾‹é …ç›®é–“è· |
| æ§åˆ¶åˆ—é–“è· | `var(--spacing-lg)` | 24px | åˆ†éš”æ§åˆ¶é …å’Œåœ–è¡¨ |

### å®¹å™¨å¯¬åº¦

```css
.monthly-heatmap-container {
  width: 100%; /* éŸ¿æ‡‰å¼å¡«æ»¿å®¹å™¨ */
  max-width: 1200px; /* é¿å…éå¯¬é›£ä»¥é–±è®€ */
  margin: 0 auto; /* ç½®ä¸­ */
  padding: var(--spacing-lg); /* 24px å…§è· */
}
```

---

## ğŸ¨ VISUAL

### è‰²å½©æ˜ å°„ï¼ˆç´…ç¶ æ¼¸å±¤ï¼‰

**æ ¸å¿ƒé…è‰²åŸå‰‡**
- ä½¿ç”¨**è—-ç™½-æ©™**æ¼¸å±¤ä»£æ›¿å‚³çµ±ç´…ç¶ ï¼ˆè‰²ç›²å‹å¥½ï¼‰
- åŸºæ–¼ 60-30-10 æ³•å‰‡ï¼šèƒŒæ™¯ç™½ 60%ï¼Œæ ¼å­å¡«æ»¿ 30%ï¼Œå¼·èª¿è‰² 10%

#### è‰²å½©æ¼¸å±¤å®šç¾©

```css
:root {
  /* è² å ±é…¬ï¼ˆè—è‰²ç³»ï¼‰- å†·è‰²ç³»è¡¨ç¤ºä¸‹è·Œ */
  --heatmap-negative-strong: #1d4ed8;  /* -10% ä»¥ä¸Š */
  --heatmap-negative-medium: #60a5fa; /* -5% ~ -10% */
  --heatmap-negative-light: #dbeafe;  /* -1% ~ -5% */

  /* ä¸­æ€§ï¼ˆæ¥è¿‘é›¶ï¼‰*/
  --heatmap-neutral: #f3f4f6;         /* -1% ~ +1% */

  /* æ­£å ±é…¬ï¼ˆæ©™/ç¶ è‰²ç³»ï¼‰- æš–è‰²ç³»è¡¨ç¤ºä¸Šæ¼² */
  --heatmap-positive-light: #d1fae5;  /* +1% ~ +5% */
  --heatmap-positive-medium: #22c55e; /* +5% ~ +10% */
  --heatmap-positive-strong: #15803d; /* +10% ä»¥ä¸Š */
}
```

**ç‚ºä»€éº¼ä¸ç”¨ç´…ç¶ ï¼Ÿ**
- 8% ç”·æ€§æœ‰ç´…ç¶ è‰²ç›²ï¼ˆæœ€å¸¸è¦‹ï¼‰
- è—-æ©™å°æ¯”æ˜é¡¯ä¸”è‰²ç›²å‹å¥½
- ç¬¦åˆé‡‘èæ…£ä¾‹ï¼ˆè—=å†·/è·Œï¼Œæ©™/ç¶ =æš–/æ¼²ï¼‰

#### è‰²å½©æ˜ å°„é‚è¼¯

```javascript
function getHeatmapColor(monthlyReturn) {
  const percent = monthlyReturn * 100;

  if (percent <= -10) return 'var(--heatmap-negative-strong)';
  if (percent <= -5) return 'var(--heatmap-negative-medium)';
  if (percent <= -1) return 'var(--heatmap-negative-light)';
  if (percent < 1) return 'var(--heatmap-neutral)';
  if (percent < 5) return 'var(--heatmap-positive-light)';
  if (percent < 10) return 'var(--heatmap-positive-medium)';
  return 'var(--heatmap-positive-strong)';
}
```

### èƒŒæ™¯èˆ‡é‚Šæ¡†

```css
.heatmap-cell {
  background: var(--color-surface); /* é è¨­ç™½è‰² */
  border: 1px solid var(--color-border); /* #e5e7eb */
  border-radius: var(--primitive-radius-sm); /* 2px - å¾®åœ“è§’ */
  transition: all var(--duration-fast) var(--ease-out); /* 150ms */
}

.heatmap-cell--has-data {
  /* æœ‰è³‡æ–™çš„æ ¼å­ä½¿ç”¨è¨ˆç®—å‡ºçš„é¡è‰² */
  background: /* æ ¹æ“šå ±é…¬è¨ˆç®— */;
  border-color: transparent; /* ç§»é™¤é‚Šæ¡†è®“é¡è‰²æ›´çµ±ä¸€ */
}

.heatmap-cell--empty {
  /* ç©ºæ ¼å­ï¼ˆæœªä¾†æœˆä»½æˆ–è³‡æ–™ä¸è¶³ï¼‰ */
  background: var(--color-surface-sunken); /* #f3f4f6 */
  border: 1px dashed var(--color-border-muted); /* è™›ç·šé‚Šæ¡† */
}
```

### å­—é«”æ’ç‰ˆ

```css
.heatmap-title {
  font: var(--font-heading-4); /* 600 / 20px / 1.375 / sans */
  color: var(--color-text); /* #111827 */
  margin-bottom: var(--spacing-md); /* 16px */
}

.heatmap-cell-label {
  /* æ ¼å­å…§çš„å ±é…¬ç™¾åˆ†æ¯” */
  font-size: var(--primitive-text-xs); /* 12px */
  font-weight: var(--primitive-font-medium); /* 500 */
  color: var(--color-text); /* é è¨­é»‘è‰² */
  line-height: var(--primitive-leading-tight); /* 1.25 */
}

.heatmap-cell-label--strong-negative {
  color: #ffffff; /* æ·±è—èƒŒæ™¯éœ€è¦ç™½è‰²æ–‡å­— */
}

.heatmap-cell-label--strong-positive {
  color: #ffffff; /* æ·±ç¶ èƒŒæ™¯éœ€è¦ç™½è‰²æ–‡å­— */
}

.heatmap-month-header {
  /* æœˆä»½æ¨™ç±¤ï¼ˆJan, Feb...ï¼‰ */
  font-size: var(--primitive-text-sm); /* 14px */
  font-weight: var(--primitive-font-semibold); /* 600 */
  color: var(--color-text-secondary); /* #4b5563 */
  text-align: center;
}

.heatmap-year-label {
  /* å¹´ä»½æ¨™ç±¤ï¼ˆ2024, 2023...ï¼‰ */
  font-size: var(--primitive-text-sm); /* 14px */
  font-weight: var(--primitive-font-semibold); /* 600 */
  color: var(--color-text-secondary); /* #4b5563 */
  text-align: right;
  padding-right: var(--spacing-sm); /* 8px */
}
```

### å°æ¯”åº¦æª¢æŸ¥

| çµ„åˆ | å°æ¯”åº¦ | WCAG æ¨™æº– |
|------|--------|-----------|
| ç™½è‰²æ–‡å­— on `#1d4ed8` | 8.6:1 | âœ… AAA |
| ç™½è‰²æ–‡å­— on `#15803d` | 5.2:1 | âœ… AA |
| é»‘è‰²æ–‡å­— on `#dbeafe` | 12.1:1 | âœ… AAA |
| é»‘è‰²æ–‡å­— on `#d1fae5` | 11.8:1 | âœ… AAA |

---

## ğŸ”„ STATES

### æ ¼å­ç‹€æ…‹

| ç‹€æ…‹ | è¦–è¦ºè®ŠåŒ– | è§¸ç™¼æ¢ä»¶ |
|------|----------|----------|
| **Default** | æ ¹æ“šå ±é…¬é¡¯ç¤ºé¡è‰² | æœ‰è³‡æ–™çš„æœˆä»½ |
| **Empty** | è™›ç·šé‚Šæ¡† + æ·ºç°èƒŒæ™¯ | æœªä¾†æœˆä»½æˆ–è³‡æ–™ä¸è¶³ |
| **Hover** | è¼•å¾®æ”¾å¤§ + é™°å½± | æ»‘é¼ æ‡¸åœ |
| **Selected** | åŠ ç²—é‚Šæ¡† | é»æ“Šé¸ä¸­ï¼ˆå¦‚æœæ”¯æ´ï¼‰ |

#### Hover ç‹€æ…‹

```css
.heatmap-cell:hover {
  transform: scale(1.05); /* è¼•å¾®æ”¾å¤§ */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12); /* é™°å½± */
  z-index: 1; /* é¿å…è¢«ç›¸é„°æ ¼å­é®ä½ */
  cursor: pointer;
}

.heatmap-cell--empty:hover {
  transform: none; /* ç©ºæ ¼å­ä¸æ”¾å¤§ */
  cursor: default;
}
```

#### Tooltipï¼ˆæ‡¸åœæç¤ºï¼‰

```css
.heatmap-tooltip {
  position: absolute;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--primitive-radius-md); /* 6px */
  padding: var(--spacing-sm); /* 8px */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: var(--z-tooltip); /* 80 */
  pointer-events: none; /* é¿å…é˜»æ“‹æ»‘é¼ äº‹ä»¶ */
}

.heatmap-tooltip-month {
  font-size: var(--primitive-text-sm); /* 14px */
  font-weight: var(--primitive-font-semibold); /* 600 */
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-xs); /* 4px */
}

.heatmap-tooltip-return {
  font-size: var(--primitive-text-lg); /* 18px */
  font-weight: var(--primitive-font-bold); /* 700 */
  color: var(--color-text);
}

.heatmap-tooltip-return--positive {
  color: var(--color-success); /* #22c55e */
}

.heatmap-tooltip-return--negative {
  color: var(--heatmap-negative-strong); /* #1d4ed8 */
}
```

**Tooltip å…§å®¹ç¯„ä¾‹**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2024å¹´ 3æœˆ        â”‚
â”‚                   â”‚
â”‚ æœˆå ±é…¬: +5.2%     â”‚ â† ç¶ è‰²æ–‡å­—
â”‚ äº¤æ˜“æ¬¡æ•¸: 12      â”‚
â”‚ å‹ç‡: 66.7%       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹´ä»½åˆ‡æ›æ§åˆ¶

```css
.heatmap-year-selector {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm); /* 8px */
}

.heatmap-year-button {
  /* ä½¿ç”¨ button å…ƒä»¶ token */
  background: var(--button-secondary-bg); /* transparent */
  border: 1px solid var(--color-border);
  border-radius: var(--button-radius); /* 6px */
  padding: var(--spacing-xs) var(--spacing-sm); /* 4px 8px */
  font-size: var(--primitive-text-sm); /* 14px */
  font-weight: var(--primitive-font-medium); /* 500 */
  color: var(--color-text);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}

.heatmap-year-button:hover {
  background: var(--button-secondary-bg-hover); /* #f9fafb */
  border-color: var(--color-border-strong); /* #d1d5db */
}

.heatmap-year-button--active {
  background: var(--color-primary); /* #2563eb */
  border-color: var(--color-primary);
  color: #ffffff;
}

.heatmap-year-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
```

---

## ğŸ“± RESPONSIVE

### ä¸»è¦è£ç½®
- **Desktopï¼ˆä¸»è¦ï¼‰**: 1024px+ - å®Œæ•´é¡¯ç¤ºæ‰€æœ‰æœˆä»½
- **Tablet**: 768px - å¯èƒ½éœ€è¦æ©«å‘æ²å‹•
- **Mobile**: <768px - å„ªå…ˆé¡¯ç¤ºç•¶å‰å¹´ä»½ï¼Œéš±è—æ­·å²å¹´ä»½

### æ–·é»è¡Œç‚º

```css
/* Desktop - å®Œæ•´é¡¯ç¤º */
@media (min-width: 1024px) {
  .heatmap-grid {
    grid-template-columns: 60px repeat(12, 1fr);
  }

  .heatmap-cell {
    min-width: 60px;
    min-height: 48px;
  }
}

/* Tablet - å£“ç¸®ä½†å¯è®€ */
@media (min-width: 768px) and (max-width: 1023px) {
  .heatmap-grid {
    grid-template-columns: 50px repeat(12, 1fr);
  }

  .heatmap-cell {
    min-width: 48px;
    min-height: 40px;
    font-size: var(--primitive-text-xs); /* 12px */
  }
}

/* Mobile - æ©«å‘æ²å‹• */
@media (max-width: 767px) {
  .heatmap-container {
    overflow-x: auto; /* æ©«å‘æ²å‹• */
  }

  .heatmap-grid {
    grid-template-columns: 40px repeat(12, 60px); /* å›ºå®šå¯¬åº¦ */
    min-width: 760px; /* ç¢ºä¿ä¸å£“ç¸® */
  }

  .heatmap-cell {
    min-width: 60px;
    min-height: 40px;
  }

  /* Mobile å„ªå…ˆé¡¯ç¤ºæœ€è¿‘å¹´ä»½ */
  .heatmap-year-selector {
    flex-wrap: wrap; /* æŒ‰éˆ•æ›è¡Œ */
  }
}
```

### è§¸æ§å„ªåŒ–ï¼ˆMobileï¼‰

```css
@media (max-width: 767px) {
  .heatmap-cell {
    /* è§¸æ§ç›®æ¨™æœ€å° 44px */
    min-height: 44px;
  }

  .heatmap-cell:active {
    /* Mobile é»æ“Šå›é¥‹ */
    transform: scale(0.95);
    background: rgba(0, 0, 0, 0.05);
  }

  .heatmap-tooltip {
    /* Mobile tooltip æ”¾å¤§ */
    font-size: var(--primitive-text-base); /* 16px */
    padding: var(--spacing-md); /* 16px */
  }
}
```

---

## ğŸ”— èˆ‡æ¬Šç›Šæ›²ç·šçš„è¦–è¦ºä¸€è‡´æ€§

### å…±ç”¨è¨­è¨ˆå…ƒç´ 

| å…ƒç´  | çµ±ä¸€è¦ç¯„ |
|------|----------|
| **å¡ç‰‡å®¹å™¨** | `border-radius: var(--card-radius)`, `padding: var(--card-padding)` |
| **æ¨™é¡Œæ¨£å¼** | `font: var(--font-heading-4)` |
| **è‰²å½©ç³»çµ±** | ä½¿ç”¨ç›¸åŒçš„æˆåŠŸ/éŒ¯èª¤è‰²ï¼ˆç¶ /è—ï¼‰ |
| **é–“è·ç³»çµ±** | å…ƒä»¶é–“è· `var(--spacing-lg)` |
| **é™°å½±æ•ˆæœ** | `box-shadow: var(--card-shadow)` |

### çµ±ä¸€æ™‚é–“ç¯„åœæ§åˆ¶

```css
.chart-time-control {
  /* çµ±ä¸€çš„æ™‚é–“ç¯„åœæ§åˆ¶åˆ— */
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md); /* 16px */
  margin-bottom: var(--spacing-lg); /* 24px */
  padding: var(--spacing-md);
  background: var(--color-surface-raised); /* #f9fafb */
  border-radius: var(--primitive-radius-lg); /* 8px */
}

.chart-time-range-slider {
  flex: 1;
  /* Streamlit slider æ¨£å¼æœƒç¹¼æ‰¿ä¸»é¡Œ */
}

.chart-sync-indicator {
  font-size: var(--primitive-text-xs); /* 12px */
  color: var(--color-text-muted); /* #6b7280 */
  display: flex;
  align-items: center;
  gap: var(--spacing-xs); /* 4px */
}

.chart-sync-indicator::before {
  content: 'ğŸ”—'; /* é–éˆåœ–ç¤ºè¡¨ç¤ºè¯å‹• */
}
```

---

## ğŸ’¡ UX è¨­è¨ˆåŸå‰‡æ‡‰ç”¨

### Jakob's Lawï¼ˆç†Ÿæ‚‰æ€§ï¼‰
- âœ… ä½¿ç”¨æ¨™æº–çš„ç†±åŠ›åœ–ä½ˆå±€ï¼ˆå¹´ x æœˆï¼‰
- âœ… é¡è‰²ç›´è¦ºå°æ‡‰ç›ˆè™§ï¼ˆæš–è‰²=æ¼²ï¼Œå†·è‰²=è·Œï¼‰
- âœ… æ‡¸åœé¡¯ç¤ºè©³ç´°è³‡è¨Šï¼ˆGitHub Contributions é¢¨æ ¼ï¼‰

### Fitts's Lawï¼ˆå¤§+è¿‘=æ˜“é»ï¼‰
- âœ… æ ¼å­å¤§å°è‡³å°‘ 48px x 48pxï¼ˆDesktopï¼‰
- âœ… å¹´ä»½åˆ‡æ›æŒ‰éˆ•é è¿‘åœ–è¡¨
- âœ… å¸¸ç”¨å¹´ä»½ï¼ˆæœ€è¿‘ï¼‰å„ªå…ˆé¡¯ç¤º

### Von Restorff Effectï¼ˆå·®ç•°åŒ–è¨˜æ†¶ï¼‰
- âœ… æ¥µç«¯æœˆä»½ï¼ˆ+10% æˆ– -10%ï¼‰ä½¿ç”¨æ·±è‰²çªå‡º
- âœ… ç•¶å‰æœˆä»½åŠ ç²—é‚Šæ¡†ï¼ˆå¦‚æœåœ¨å›æ¸¬ç¯„åœå…§ï¼‰

### Gestalt Principlesï¼ˆè¦–è¦ºåˆ†çµ„ï¼‰
- âœ… ä½¿ç”¨ gap åˆ†éš”æœˆä»½æ ¼å­ï¼ˆæ¥è¿‘æ€§ï¼‰
- âœ… ç›¸åŒå¹´ä»½çš„æœˆä»½ä½¿ç”¨åŒä¸€è¡Œï¼ˆå…±åŒå€åŸŸï¼‰
- âœ… é¡è‰²æ¼¸å±¤ç”¢ç”Ÿé€£çºŒæ€§

---

## ğŸ§ª å¹´ä»½åˆ‡æ›é‚è¼¯

### å¤šå¹´è³‡æ–™å±•ç¤ºç­–ç•¥

**æ–¹æ¡ˆ Aï¼šå–®å¹´é¡¯ç¤º + åˆ‡æ›æŒ‰éˆ•ï¼ˆæ¨è–¦ï¼‰**
```
å„ªé»ï¼š
- ç•«é¢ç°¡æ½”ä¸æ“æ“ 
- é©åˆå›æ¸¬è³‡æ–™è·¨å¤šå¹´ï¼ˆ3 å¹´ä»¥ä¸Šï¼‰
- åˆ‡æ›æµæš¢

ç¼ºé»ï¼š
- ç„¡æ³•åŒæ™‚æ¯”è¼ƒå¤šå¹´
```

**æ–¹æ¡ˆ Bï¼šå¤šå¹´å †ç–Šé¡¯ç¤º**
```
å„ªé»ï¼š
- ä¸€æ¬¡çœ‹åˆ°æ‰€æœ‰æ­·å²
- å®¹æ˜“ç™¼ç¾è·¨å¹´è¶¨å‹¢

ç¼ºé»ï¼š
- è³‡æ–™å¤šæ™‚ç•«é¢éé•·
- Mobile é«”é©—å·®
```

**æ¨è–¦æ–¹æ¡ˆ A**ï¼Œä¸¦æä¾›ã€Œæª¢è¦–æ‰€æœ‰å¹´ä»½ã€é¸é …

### åˆ‡æ›æ§åˆ¶å¯¦ä½œ

```javascript
// å¹´ä»½é¸æ“‡å™¨ç‹€æ…‹
const [selectedYear, setSelectedYear] = useState('2024');
const [availableYears, setAvailableYears] = useState(['2024', '2023', '2022']);

// åˆ‡æ›æŒ‰éˆ•
<div className="heatmap-year-selector">
  <button
    onClick={() => setSelectedYear('all')}
    className={selectedYear === 'all' ? 'heatmap-year-button--active' : ''}
  >
    æ‰€æœ‰å¹´ä»½
  </button>
  {availableYears.map(year => (
    <button
      key={year}
      onClick={() => setSelectedYear(year)}
      className={selectedYear === year ? 'heatmap-year-button--active' : ''}
    >
      {year}
    </button>
  ))}
</div>
```

### è‡ªå‹•å¹´ä»½é¸æ“‡é‚è¼¯

```javascript
// é è¨­é¡¯ç¤ºæœ€æ–°å®Œæ•´å¹´ä»½
function getDefaultYear(equityCurve) {
  const latestDate = equityCurve.index[-1];
  const currentYear = new Date().getFullYear();

  // å¦‚æœä»Šå¹´è³‡æ–™ä¸è¶³ 6 å€‹æœˆï¼Œé¡¯ç¤ºå»å¹´
  if (latestDate.getMonth() < 6 && latestDate.getFullYear() === currentYear) {
    return currentYear - 1;
  }

  return latestDate.getFullYear();
}
```

---

## ğŸ“Š ç©ºç¼ºè™•ç†è¦å‰‡

### æƒ…å¢ƒ

1. **æœªä¾†æœˆä»½**ï¼šç•¶å‰å¹´ä»½çš„æœªä¾†æœˆä»½
2. **è³‡æ–™ä¸è¶³**ï¼šæœˆåˆæˆ–æœˆæœ«é–‹å§‹/çµæŸçš„å›æ¸¬
3. **ç„¡äº¤æ˜“æœˆ**ï¼šæ•´æœˆç„¡äº¤æ˜“æ´»å‹•

### è¦–è¦ºè™•ç†

```css
/* æœªä¾†æœˆä»½ */
.heatmap-cell--future {
  background: var(--color-surface-sunken); /* #f3f4f6 */
  border: 1px dashed var(--color-border-muted); /* è™›ç·š */
  opacity: 0.5;
  cursor: not-allowed;
}

/* è³‡æ–™ä¸è¶³ï¼ˆåƒ…éƒ¨åˆ†å¤©æ•¸ï¼‰ */
.heatmap-cell--partial {
  /* æ­£å¸¸é¡¯ç¤ºé¡è‰²ï¼Œä½†åŠ ä¸Šæ¨™è¨˜ */
  position: relative;
}

.heatmap-cell--partial::after {
  content: '*';
  position: absolute;
  top: 2px;
  right: 4px;
  font-size: 10px;
  color: var(--color-warning); /* æ©™è‰²æ˜Ÿè™Ÿ */
}

/* ç„¡äº¤æ˜“æœˆ */
.heatmap-cell--no-trades {
  background: var(--color-surface-sunken);
  border: 1px solid var(--color-border);
  color: var(--color-text-muted);
}

.heatmap-cell--no-trades::before {
  content: '-';
  font-size: var(--primitive-text-sm);
}
```

### Tooltip å·®ç•°

```
æœªä¾†æœˆä»½ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2024å¹´ 12æœˆ       â”‚
â”‚ å°šç„¡è³‡æ–™          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è³‡æ–™ä¸è¶³ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2024å¹´ 1æœˆ *      â”‚
â”‚                   â”‚
â”‚ æœˆå ±é…¬: +3.1%     â”‚
â”‚ è³‡æ–™å¤©æ•¸: 15/31   â”‚ â† é¡¯ç¤ºå¯¦éš›å¤©æ•¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç„¡äº¤æ˜“æœˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2024å¹´ 8æœˆ        â”‚
â”‚ ç„¡äº¤æ˜“æ´»å‹•        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Checklist

### è‰²å½©è¨­è¨ˆ
- [x] ä½¿ç”¨è‰²ç›²å‹å¥½çš„è—-æ©™é…è‰²
- [x] æ‰€æœ‰æ–‡å­—å°æ¯”åº¦ â‰¥ 4.5:1
- [x] æ¥µç«¯å€¼ä½¿ç”¨æ·±è‰²çªå‡º
- [x] å¼•ç”¨ tokens.md çš„å…·é«”è®Šæ•¸

### äº’å‹•è¨­è¨ˆ
- [x] Hover ç‹€æ…‹æ¸…æ™°ï¼ˆæ”¾å¤§ + é™°å½±ï¼‰
- [x] Tooltip æä¾›è©³ç´°è³‡è¨Š
- [x] ç©ºæ ¼å­ä¸å¯äº’å‹•
- [x] è§¸æ§ç›®æ¨™ â‰¥ 44pxï¼ˆMobileï¼‰

### è³‡è¨Šå±¤ç´š
- [x] æ¨™é¡Œä½¿ç”¨ `--font-heading-4`
- [x] æœˆä»½æ¨™ç±¤ä½¿ç”¨ `--text-sm` åŠç²—é«”
- [x] å ±é…¬æ•¸å­—ä½¿ç”¨ `--text-xs`
- [x] è¦–è¦ºåˆ†çµ„æ¸…æ™°ï¼ˆå¹´ä»½è¡Œï¼‰

### éŸ¿æ‡‰å¼
- [x] Desktop å®Œæ•´é¡¯ç¤º
- [x] Tablet å£“ç¸®ä½†å¯è®€
- [x] Mobile æ©«å‘æ²å‹•
- [x] è§¸æ§å„ªåŒ–

### ä¸€è‡´æ€§
- [x] èˆ‡æ¬Šç›Šæ›²ç·šå…±ç”¨å¡ç‰‡æ¨£å¼
- [x] çµ±ä¸€æ™‚é–“ç¯„åœæ§åˆ¶
- [x] å…±ç”¨é–“è·å’Œå­—é«”ç³»çµ±
- [x] éµå¾ª 60-30-10 è‰²å½©æ³•å‰‡

---

## ğŸ¯ å¯¦ä½œå„ªå…ˆç´š

### P0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
1. åŸºæœ¬ç†±åŠ›åœ–æ¸²æŸ“ï¼ˆ12 æœˆ x N å¹´ï¼‰
2. è‰²å½©æ˜ å°„é‚è¼¯ï¼ˆå ±é…¬ â†’ é¡è‰²ï¼‰
3. Hover tooltip é¡¯ç¤ºè©³ç´°è³‡è¨Š

### P1ï¼ˆå¢å¼·é«”é©—ï¼‰
4. å¹´ä»½åˆ‡æ›æŒ‰éˆ•
5. èˆ‡æ¬Šç›Šæ›²ç·šæ™‚é–“ç¯„åœè¯å‹•
6. éŸ¿æ‡‰å¼ä½ˆå±€

### P2ï¼ˆéŒ¦ä¸Šæ·»èŠ±ï¼‰
7. ç©ºç¼ºæ ¼å­ç‰¹æ®Šæ¨™è¨˜
8. å‹•ç•«éæ¸¡æ•ˆæœ
9. åŒ¯å‡ºåœ–è¡¨åŠŸèƒ½

---

## ğŸ“ é–‹ç™¼è€…æ³¨æ„äº‹é …

### CSS Variables å¿…é ˆä½¿ç”¨
```css
/* âŒ éŒ¯èª¤ï¼šhardcode æ•¸å€¼ */
.heatmap-cell {
  color: #2563eb;
  padding: 16px;
  border-radius: 6px;
}

/* âœ… æ­£ç¢ºï¼šä½¿ç”¨ tokens */
.heatmap-cell {
  color: var(--color-primary);
  padding: var(--spacing-md);
  border-radius: var(--primitive-radius-md);
}
```

### è³‡æ–™æ ¼å¼

```python
# å¾ daily_returns è¨ˆç®—æœˆåº¦å ±é…¬
monthly_returns = daily_returns.resample('M').apply(
    lambda x: (1 + x).prod() - 1
) * 100  # è½‰ç‚ºç™¾åˆ†æ¯”

# è½‰ç‚ºç†±åŠ›åœ–æ ¼å¼
heatmap_data = {
    '2024': {
        'Jan': 5.2,
        'Feb': 3.1,
        'Mar': -1.2,
        # ...
    },
    '2023': {
        # ...
    }
}
```

### Plotly å¯¦ä½œç¯„ä¾‹

```python
import plotly.graph_objects as go

# å»ºç«‹ç†±åŠ›åœ–
fig = go.Figure(data=go.Heatmap(
    z=returns_matrix,  # å ±é…¬æ•¸å€¼çŸ©é™£
    x=['Jan', 'Feb', 'Mar', ...],  # æœˆä»½
    y=['2024', '2023', '2022'],  # å¹´ä»½
    colorscale=[
        [0.0, '#1d4ed8'],  # æ·±è—ï¼ˆè² å ±é…¬ï¼‰
        [0.4, '#dbeafe'],  # æ·ºè—
        [0.5, '#f3f4f6'],  # ä¸­æ€§ç°
        [0.6, '#d1fae5'],  # æ·ºç¶ 
        [1.0, '#15803d'],  # æ·±ç¶ ï¼ˆæ­£å ±é…¬ï¼‰
    ],
    hovertemplate='<b>%{y}å¹´ %{x}</b><br>æœˆå ±é…¬: %{z:.2f}%<extra></extra>',
    colorbar=dict(
        title='æœˆå ±é…¬ (%)',
        ticksuffix='%'
    )
))

fig.update_layout(
    title='æœˆåº¦å ±é…¬ç†±åŠ›åœ–',
    xaxis_title='æœˆä»½',
    yaxis_title='å¹´ä»½',
    font=dict(family='Inter, sans-serif'),
    plot_bgcolor='white',
)
```

---

## ğŸ” åƒè€ƒè³‡æº

- Design Tokens: `~/.claude/skills/ui/references/tokens.md`
- è‰²å½©ç†è«–: `~/.claude/skills/ui/references/color-theory.md`
- UX å¿ƒç†å­¸: `~/.claude/skills/ux/references/psychology.md`
- æ¬Šç›Šæ›²ç·šè¨­è¨ˆ: `openspec/changes/archive/.../ui-specs/validation-page.md`

---

**æœ€å¾Œæ›´æ–°**: 2026-01-12
**è¨­è¨ˆè€…**: DESIGNER
**ç‰ˆæœ¬**: 1.0
